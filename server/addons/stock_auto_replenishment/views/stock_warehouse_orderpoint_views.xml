<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Extensión de la vista tree de orderpoint - agregar botón para encolar -->
    <record id="view_warehouse_orderpoint_tree_auto_replenishment" model="ir.ui.view">
        <field name="name">stock.warehouse.orderpoint.tree.inherit.auto.replenishment</field>
        <field name="model">stock.warehouse.orderpoint</field>
        <field name="inherit_id" ref="stock.view_warehouse_orderpoint_tree_editable"/>
        <field name="arch" type="xml">
            <!-- Ocultar botón "Ordenar una vez" cuando el módulo está habilitado -->
            <xpath expr="//button[@name='action_replenish']" position="before">
                <field name="hide_order_once" column_invisible="True"/>
            </xpath>
            <xpath expr="//button[@name='action_replenish']" position="attributes">
                <attribute name="invisible">hide_order_once or qty_to_order &lt;= 0</attribute>
            </xpath>
            <!-- Agregar botón Encolar -->
            <xpath expr="//button[@name='action_replenish']" position="after">
                <field name="has_pending_queue" column_invisible="True"/>
                <button name="action_force_enqueue"
                        string="Encolar"
                        type="object"
                        class="o_replenish_buttons text-info"
                        icon="fa-plus-circle"
                        invisible="qty_to_order &lt;= 0.0 or trigger != 'auto' or has_pending_queue or not hide_order_once"
                        title="Encolar para transferencia automática"/>
            </xpath>
        </field>
    </record>
</odoo>
