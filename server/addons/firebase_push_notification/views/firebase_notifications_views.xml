<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="menu_firebase_push_notification_action" model="ir.actions.act_window">
        <field name="name">Notificaciones Push</field>
        <field name="res_model">push.message</field>
        <field name="view_mode">tree,form</field>
    </record>
    <record id="view_firebase_push_notification_tree" model="ir.ui.view">
        <field name="name">push.message.tree</field>
        <field name="model">push.message</field>
        <field name="arch" type="xml">
            <tree string="Notificaciones Push">
                <field name="name"/>
                <field name="send_date"/>
                <field name="state" string="Estado de envio"/>
            </tree>
        </field>
    </record>
    <!--    vista form-->
    <record id="view_firebase_push_notification_form" model="ir.ui.view">
        <field name="name">push.message.form</field>
        <field name="model">push.message</field>
        <field name="arch" type="xml">
            <form string="Notificaciones Push">
                <header>
                    <field name="state" widget="statusbar" clickable="true"/>
                    <button name="action_process_push_notification" type="object" invisible="state not in ['draft',]"
                            string="Procesar Notificaciones"
                            class="btn-success"
                    />
                </header>
                <sheet>
<!--                    <group>-->
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="body" class="oe-bordered-editor"/>
                            </group>
                            <group>
                                <field name="send_date" readonly="state == 'sending'"/>
                                <field name="image" string="Imagen" options="{'preview_image': 'image', 'size': [128, 128]}" widget="image" class="oe_avatar"/>
                            </group>

                        </group>
                        <group>
                            <group>
                                <!--                            <field name="device_ids" widget="many2many_tags"-->
                                <!--                                   options="{'no_create': True, 'no_edit':True}"/>-->
                                <field name="device_ids" widget="many2many_tags"/>
                            </group>
                        </group>
<!--                    </group>-->
                    <notebook>
                        <page string="Destinatarios">
                            <field name="message_lines">
                                <tree editable="bottom">
                                    <field name="device_id"/>
                                    <field name="sent_at"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>

            </form>
        </field>
    </record>
</odoo>